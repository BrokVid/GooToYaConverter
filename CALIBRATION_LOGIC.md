# –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `pyperclip.waitForNewPaste()`
**–î–æ:**
- –ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–µ–ª–∞–ª–∞ `time.sleep(0.5)` –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–ª–∞ –±—É—Ñ–µ—Ä —á–µ—Ä–µ–∑ `pyperclip.paste()`
- –ù—É–∂–µ–Ω –±—ã–ª –º–µ—Ö–∞–Ω–∏–∑–º `ignore_text` –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
- –ú–æ–≥–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—Ç—å race conditions

**–ü–æ—Å–ª–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–ª–æ–∫–∏—Ä—É—é—â–∏–π –≤—ã–∑–æ–≤ `pyperclip.waitForNewPaste(timeout=1)`
- –§—É–Ω–∫—Ü–∏—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≤ –±—É—Ñ–µ—Ä —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ **—á—Ç–æ-—Ç–æ –Ω–æ–≤–æ–µ**
- –ù–µ –Ω—É–∂–µ–Ω `ignore_text` - —Ñ—É–Ω–∫—Ü–∏—è —Å–∞–º–∞ –∫—ç—à–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

### 2. –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

**–î–æ:**
- –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–∏–Ω–∏–º–∞–ª–∞ –¥–≤–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–±–µ –±—ã–ª–∏ –∏–∑ –æ–¥–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

**–ü–æ—Å–ª–µ:**
```python
# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø—ã –æ–±–µ–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
type_1 = guess_source_type(raw_1)
type_2 = guess_source_type(raw_2)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ–æ—Ä–º–∞—Ç—ã –†–ê–ó–ù–´–ï
if type_1 == type_2:
    state.calibration_status_text = f"‚ö†Ô∏è –û–±–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã {type_1}! –ù—É–∂–Ω–∞ –ø–∞—Ä–∞: Google + Yandex"
    # –ù–ï —Å–±—Ä–∞—Å—ã–≤–∞–µ–º pending_google, –∂–¥–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤—Ç–æ—Ä—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É
    continue
```

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫–æ–ø–∏—Ä—É–µ—Ç –¥–≤–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ø–Ω–¥–µ–∫—Å–∞ –∏–ª–∏ –¥–≤–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã Google:
- –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–∫–∞–∂–µ—Ç –æ—à–∏–±–∫—É –≤ —Å—Ç–∞—Ç—É—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
- **–ù–ï —Å–±—Ä–æ—Å–∏—Ç** –ø–µ—Ä–≤—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É
- –ë—É–¥–µ—Ç –∂–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤—Ç–æ—Ä—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É

### 3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –î–û –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü—É

**–î–æ:**
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å —Å `location: "–ó–∞–≥—Ä—É–∑–∫–∞..."`
- Geocoding –¥–µ–ª–∞–ª—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ `GeocodingWorker`
- –í —Ç–∞–±–ª–∏—Ü–µ –ø–æ—è–≤–ª—è–ª–æ—Å—å "–ó–∞–≥—Ä—É–∑–∫–∞..." –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

**–ü–æ—Å–ª–µ:**
```python
# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å "–û–ø—Ä–µ–¥–µ–ª—è—é –≥–æ—Ä–æ–¥..."
state.calibration_status_text = "üåç –û–ø—Ä–µ–¥–µ–ª—è—é –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ..."

# –ü–æ–ª—É—á–∞–µ–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –°–ò–ù–•–†–û–ù–ù–û (–¥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü—É)
location = reverse_geocode(lat, lon)

# –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é —Ç–æ—á–∫—É —Å —É–∂–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º
new_point = {
    "google": final_google, 
    "yandex": final_yandex, 
    "location": location
}
```

–¢–µ–ø–µ—Ä—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É **—Å—Ä–∞–∑—É —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –≥–æ—Ä–æ–¥–∞**.

### 4. –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–î–æ:**
- "–ü–æ–ª—É—á–µ–Ω Google. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Yandex..."
- "–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã!"

**–ü–æ—Å–ª–µ:**
- "–ü–æ–ª—É—á–µ–Ω Google. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Yandex (–∫–æ—Ä–æ—Ç–∫–∏–µ)..."
- "üåç –û–ø—Ä–µ–¥–µ–ª—è—é –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ..."
- "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: [–ì–æ—Ä–æ–¥]. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –ø–∞—Ä—É..."
- "‚ö†Ô∏è –û–±–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã Google! –ù—É–∂–Ω–∞ –ø–∞—Ä–∞: Google + Yandex"

### 5. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å

–¢–µ–ø–µ—Ä—å –≤—Å–µ –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
```
[CALIBRATION] First coord received: Google
[CALIBRATION] Coord 1: Google, Coord 2: Yandex
[CALIBRATION] Added: –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫, –†–æ—Å—Å–∏—è | G: 54.996..., Y: 54.996...
[CONVERT] 56.828... -> 56.828...
```

## –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—Å–µ–≥–¥–∞: Google ‚Üí Yandex

–ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ–ø–∏—Ä—É–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:
1. **–Ø–Ω–¥–µ–∫—Å, –ø–æ—Ç–æ–º Google** ‚Üí –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –∏ –ø–æ–º–µ–Ω—è–µ—Ç –º–µ—Å—Ç–∞–º–∏
2. **Google, –ø–æ—Ç–æ–º –Ø–Ω–¥–µ–∫—Å** ‚Üí –ø—Ä–æ–≥—Ä–∞–º–º–∞ –æ—Å—Ç–∞–≤–∏—Ç –∫–∞–∫ –µ—Å—Ç—å

–§—É–Ω–∫—Ü–∏—è `check_swap_heuristic()` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
- –ü–æ —Ç–æ—á–Ω–æ—Å—Ç–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π)
  - Google: –æ–±—ã—á–Ω–æ > 8 –∑–Ω–∞–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 14 –∑–Ω–∞–∫–æ–≤)
  - Yandex: –æ–±—ã—á–Ω–æ ‚â§ 8 –∑–Ω–∞–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 6 –∑–Ω–∞–∫–æ–≤)
- –ü–æ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ (–µ—Å–ª–∏ —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–µ –ø–æ–º–æ–≥–ª–∞)

## –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –¢–µ—Å—Ç 1: –ù–æ—Ä–º–∞–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (Google ‚Üí Yandex)
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫—É
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ: `54.99665704896515, 82.80454371555194` (Google)
   - –°—Ç–∞—Ç—É—Å: "–ü–æ–ª—É—á–µ–Ω Google. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Yandex (–∫–æ—Ä–æ—Ç–∫–∏–µ)..."
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ: `54.996659, 82.804552` (Yandex)
   - –°—Ç–∞—Ç—É—Å: "üåç –û–ø—Ä–µ–¥–µ–ª—è—é –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ..."
   - –°—Ç–∞—Ç—É—Å: "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: [–ì–æ—Ä–æ–¥]. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –ø–∞—Ä—É..."
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É: Google –≤ –ø–µ—Ä–≤–æ–º —Å—Ç–æ–ª–±—Ü–µ, Yandex –≤–æ –≤—Ç–æ—Ä–æ–º

### –¢–µ—Å—Ç 2: –û–±—Ä–∞—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ (Yandex ‚Üí Google)
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫—É
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ: `54.996659, 82.804552` (Yandex)
   - –°—Ç–∞—Ç—É—Å: "–ü–æ–ª—É—á–µ–Ω Yandex. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Google (–¥–ª–∏–Ω–Ω—ã–µ)..."
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ: `54.99665704896515, 82.80454371555194` (Google)
   - –°—Ç–∞—Ç—É—Å: "üåç –û–ø—Ä–µ–¥–µ–ª—è—é –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ..."
   - –°—Ç–∞—Ç—É—Å: "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: [–ì–æ—Ä–æ–¥]. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –ø–∞—Ä—É..."
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É: Google –≤ –ø–µ—Ä–≤–æ–º —Å—Ç–æ–ª–±—Ü–µ, Yandex –≤–æ –≤—Ç–æ—Ä–æ–º (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—Ç–∞–≤–ª–µ–Ω–æ)

### –¢–µ—Å—Ç 3: –û–±–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ (–æ—à–∏–±–∫–∞)
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫—É
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ: `54.99665704896515, 82.80454371555194` (Google)
   - –°—Ç–∞—Ç—É—Å: "–ü–æ–ª—É—á–µ–Ω Google. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Yandex (–∫–æ—Ä–æ—Ç–∫–∏–µ)..."
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ: `56.82811805737119, 60.61426164412377` (—Ç–æ–∂–µ Google)
   - –°—Ç–∞—Ç—É—Å: "‚ö†Ô∏è –û–±–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã Google! –ù—É–∂–Ω–∞ –ø–∞—Ä–∞: Google + Yandex"
   - –ü–µ—Ä–≤–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ **–ù–ï —Å–±—Ä–æ—à–µ–Ω–∞**
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ: `54.996659, 82.804552` (Yandex - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è)
   - –°—Ç–∞—Ç—É—Å: "üåç –û–ø—Ä–µ–¥–µ–ª—è—é –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ..."
   - –°—Ç–∞—Ç—É—Å: "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: [–ì–æ—Ä–æ–¥]. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –ø–∞—Ä—É..."

### –¢–µ—Å—Ç 4: –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –±—É—Ñ–µ—Ä–µ
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–∞–∫—É—é-—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É **–î–û** –∑–∞–ø—É—Å–∫–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫—É
   - –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –¥–æ–ª–∂–Ω–∞ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —É–∂–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É
   - –°—Ç–∞—Ç—É—Å: "–†–µ–∂–∏–º –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–µ—Ä–≤—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É..."
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω–æ–≤—É—é –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É
   - –î–æ–ª–∂–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å—Å—è –∫–∞–∫ –ø–µ—Ä–≤–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (–≥–¥–µ –∑–∞–ø—É—â–µ–Ω `python app.py`) –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏:

```
[CALIBRATION] First coord received: Yandex
[CALIBRATION] Coord 1: Yandex, Coord 2: Google
Swap Check Precision: 1=6.0, 2=14.0
Detected SWAP by Relative Precision: diff=8.0
[CALIBRATION] Added: –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫, –†–æ—Å—Å–∏—è | G: 54.996... | Y: 54.996...
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:
- –ö–∞–∫–æ–π —Ç–∏–ø –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –±—ã–ª –ø–æ–ª—É—á–µ–Ω –ø–µ—Ä–≤—ã–º
- –ö–∞–∫–∏–µ —Ç–∏–ø—ã –æ–±–µ–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- –ë—ã–ª–∞ –ª–∏ –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞
- –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü—É
